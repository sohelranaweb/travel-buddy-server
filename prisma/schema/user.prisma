model User {
        id                 String     @id @default(uuid())
        email              String     @unique
        password           String
        role               UserRole
        needPasswordChange Boolean    @default(true)
        status             UserStatus @default(ACTIVE)
        createdAt          DateTime   @default(now())
        updatedAt          DateTime   @updatedAt
        admin              Admin?
        traveler           Traveler?

        @@map("users")
}

model Admin {
        id            String   @id @default(uuid())
        name          String
        email         String   @unique
        profilePhoto  String?
        contactNumber String
        isDeleted     Boolean  @default(false)
        user          User     @relation(fields: [email], references: [email])
        createdAt     DateTime @default(now())
        updatedAt     DateTime @updatedAt

        @@map("admins")
}

// model Traveler {
//         id               String   @id @default(uuid())
//         email            String   @unique
//         name             String
//         contactNumber    String?
//         profilePhoto     String?
//         address          String?
//         gender           Gender?
//         bio              String?
//         travelInterests  String[]
//         visitedCountries String[]
//         currentLocation  String?
//         isSubscribed     Boolean  @default(false) // premium status
//         isDeleted        Boolean  @default(false)
//         createdAt        DateTime @default(now())
//         updatedAt        DateTime @updatedAt
//         user             User     @relation(fields: [email], references: [email])

//         averageRating       Float?               @default(0) // Average review rating
//         totalReviews        Int                  @default(0) // Total reviews received
//         subscriptions       Subscription[]
//         travelBuddyRequests TravelBuddyRequest[]
//         travelBuddies       TravelBuddy[]
//         reviews             Review[]
//         reviews             Review[]
//         travelPlans         TravelPlan[]

//         @@map("travelers")
// }

// TRAVELER MODEL
model Traveler {
        id               String   @id @default(uuid())
        email            String   @unique
        name             String
        contactNumber    String?
        profilePhoto     String?
        address          String?
        gender           Gender?
        bio              String?  @db.Text
        travelInterests  String[]
        visitedCountries String[]
        currentLocation  String?
        averageRating    Float?   @default(0)
        totalReviews     Int      @default(0)
        isSubscribed     Boolean  @default(true)
        isDeleted        Boolean  @default(false)
        createdAt        DateTime @default(now())
        updatedAt        DateTime @updatedAt

        // Relations - Traveler's Travel Plans
        travelPlans TravelPlan[]

        // Relations - Buddy Requests
        sentBuddyRequests TravelBuddyRequest[] @relation("SentRequests")

        // Relations - Travel Buddies
        travelBuddies TravelBuddy[] @relation("TravelBuddies")

        // Relations - Reviews
        reviewsGiven    Review[]       @relation("ReviewerToTraveler")
        reviewsReceived Review[]       @relation("RevieweeToTraveler")
        user            User           @relation(fields: [email], references: [email])
        subscriptions   Subscription[]

        @@index([email])
        @@index([averageRating])
        @@map("travelers")
}
